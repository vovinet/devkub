# "11.4 Микросервисы: масштабирование"

## 1: Кластеризация

Под описанный функционал идеально ложится, как мне кажется, Kubernetes.
- Поддержка контейнеров - да (containerd).
- Обеспечивать обнаружение сервисов и маршрутизацию запросов - да, в нём есть такая сущность как сервис, который с одной стороны позволяет фильтровать pod'ы, на которые будет выполнена маршрутизация запросов, а так же сервис создаёт точку входа для входящих запросов, т.е. реализует API gateway. Так же есть Ingress Controllers, Load Balancer - в общем эту задачу он умеет выполнять от и до.
- Обеспечивать возможность горизонтального масштабирования - да. В кластер можно включить до 5000 узлов (серверов). [ссылка](https://kubernetes.io/docs/setup/best-practices/cluster-large/)  
- Обеспечивать возможность автоматического масштабирования - да. В кластере должен быть развёрнут Metrics Server, далее просто пишем манифест с типом kind: HorizontalPodAutoscaler и [_говорим голосом из рекламы Intel_] приложение масштабируется автоматически.
- Обеспечивать явное разделение ресурсов доступных извне и внутри системы - да. Возможно тут речь идёт как про аппаратные ресурсы (request/limit), та так же мы можем ограничивать доступность других объуектов системы с помощью Network Policy, а внешние ресурсы ограничить только теми, что сами опишем как endpoint.
- Обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т.п. - да, поддерживает так же "из коробки". Хотя храние секретов в kubernetes не является его сильной стороной. У него достаточно много ограничений на размер секретов, а так же большое их количество требует большого количества ресурсов и заметляет работу системы. Гораздо эффективнее для этого использовать Vault.

Помимо kubernetes в связке с Vault с описанными задачами мог бы справиться Docker в Swarm Mode, но в данный момент он уже глубоко deprecated.
