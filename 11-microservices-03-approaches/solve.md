# 11.03 Микросервисы: подходы  

## Задача 1: Обеспечить разработку

Под данные требования полностью подходит Gitlab в платной редакции. Бесплатная редакция имеет ограничение на количество параллельно запущенных агентов, даже если они расположены на собственных серверах. Число облачных сборщиков также ограничено. Если всё же хочется реализовать задачу на бесплатных редакциях, то мой выбор бы пал на связку Gitlab CE + Jenkins. Использование Jenkins снимет с нас ограничение на параллельное выполнение агентов, но выполняться они должны на наших серверных ресурсах.

## Задача 2: Логи
Все переисленные задачи вполне решает ELK-стек. Данный стек состоит из:
- Elasticsearch - TSDB для хранения и обработки больших объёмов текстовой информации
- Logstash - сборщик, отбработчик и транспортировщик логов в централизованное хранилище
- Kibana - пользовательский интерфес для работы с данными, хранимыми в Elasticsearch

С развитием стека я бы рекомендовал заменить достаточно "тяжёлый" logstash на filebeat, который также умеет забирать логи в том числе из stdout, но я вляется при этом чуть более стабильным и легковесным.

Кроме того, я бы ещё обязательно обратил бы внимание на относительно новый продукт, который по отзывам имеет ещё более высокую производительность и не менее широкий функционал - это Grafana Loki.

## Задача 3: Мониторинг
Если мы говорим про продукт, динамически разворачиваемый с помощью CI, то, возможно, Zabbix был бы наиболее простым решением, т.к. он поддерживает работу по PUSH-модели, т.е. мы можем встроить агент в наш CI и метрики будут автоматически появляться в системе мониторинга. С одной стороны у нас будет будет относительное простое развёртываение и отсутствие необзодимости донастройики самого мониторинга после масштабирования системы. Но данная система всё же имеет некоторые проблемы с производительностью на больших объёмах данных. По-этому к определенному времени мы столкнёмся с необходимостью перейти на стек node_exporter, prometheus, grafana. При ещё большем росте продукта можно настроить экспортеры на использование отдельных prometheus-серверов, а с них данные консолидировать в Victoria Metrics. 

